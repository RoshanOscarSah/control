<!doctype html>
{%load static%}
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="{% static 'img/favicon.png'%}" type="image/png" sizes="16x16">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{% static 'css/jquery.growl.css'%}">
    <link rel="stylesheet" href="{% static 'fonts/fontawesome-free-5.13.0-web/css/all.min.css'%}">
    <link rel="stylesheet" href="{% static 'fonts/cooljazz.css'%}">
    <link rel="stylesheet" href="{% static 'css/style.css'%}">

    <title>Control</title>
  </head>
  <body>
<!--  header-->
    <section class="container-fluid">
      <div class="row">
        <div class="col-4 col-sm-3 col-md-3 col-lg-3 col-xl-3">
          <img id="sidebarCollapse" src="{% static 'img/logo.png'%}" alt="Control" class="img-fluid logo" height="75px" width="220px" >
        </div>
        <div class="col-8 col-sm-9 col-md-9 col-lg-9 col-xl-9">
          <div class="row">
             <div class="col-12 col-sm-10 col-md-9 col-lg-10 col-xl-10">
                <form method="post" id="searchedByForm" class="searchsm" autocomplete="off">
                    {% csrf_token %}
<!--                    <button type="submit" class="btnTransparent"><i class="fa fa-search searchicon"></i></button>-->
                    <input type="search" id="search" name="search" placeholder="Search for an Artist, Song, Album or Playlist" class="searchbox" required>
                </form>
             </div>
              <div class="col-12 col-sm-2 col-md-3 col-lg-2 col-xl-2">
                  <button class="btnLogin" onclick='loguser("")'>
                    <a href="#" id="replace">{% if user.is_authenticated %}Sign Out{% else %}Sign In{% endif %}</a>
                </button>

              </div>



          </div>

        </div>

        </div>
    </section>

<!-- Sidebar  -->
    <nav id="sidebar" class="active">
            <ul class="list-unstyled">
                <li>
                    <a href="#" class="activated" id="home" >
                        <i class="fas fa-home"></i>
                        HOME
                    </a>
                </li>
                <li>
                    <a href="#" class="deactivated" id="top">
                        <i class="fas fa-chart-line"></i>
                        TOP
                    </a>
                </li>
                <li>
                    <a href="#" class="deactivated" id="new">
                        <i class="fas fa-gift"></i>
                        NEW
                    </a>
                </li>
                <li>
                    <a href="#" class="deactivated" id="recent">
                        <i class="fas fa-history"></i>
                        RECENT
                    </a>
                </li>
                <li>
                    <a href="#" class="deactivated" id="library">
                        <i class="fas fa-stream"></i>
                        Library
                    </a>
                </li>
            </ul>

        </nav>

<!-- Content -->
    <section class="mainContent">
        <div id="displayInMainContent">
            {% include "home.html" %}
    </div>
    </section>

<!-- audio control-->
    <footer class="fixed-bottom container-fluid">
        <i class="fas fa-caret-square-down showHideControl" id="hideControl"></i>
        <i class="fas fa-caret-square-up showHideControl" id="showControl"></i>
        <div class="row footerMargin" id="CCmusic">
            <div class="col-12 col-sm-5 col-md-3 col-lg-3 col-xl-3">
                <div class="row">
                    <div class="col-4 col-sm-3 col-md-4 col-lg-3 col-xl-3">
                        <a href="#" id="CtrlImage" ><img src="{% static 'img/thumbnails/artwork.jpg'%}" id="ControlArtwork" alt="Album Art" class="img-fluid albumArtNowPlaying" height="60px" width="60px"></a>
                    </div>
                    <div class="col-6 songDiscription">
                        <div class="row">
                            <div class="col-12 songTitle">
                                <a href="#" id="songTitle"><p>A Head Full of Dreams </p></a>
                            </div>
                            <div class="col-12 songArtist">
                                <a href="#" id="songArtist" ><p>Coldplay</p></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-1">
                        <a href="#" id="favheartmain" onclick='favourite("far")'><i id="favheart" class="far fa-heart favourateIcon"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-7 col-sm-7 col-md-6 col-lg-6 col-xl-6">
                <div class="row">
                    <div class="col-12">
                        <div class="row">
                            <div class="col-3"></div>
                            <div class="col-1">
                                <i class="fas fa-random controlColor"></i>
                            </div>
                            <div class="col-1">
                                  <i class="fas fa-step-backward controlColor" onclick="pre()"></i>
                            </div>
                            <div class="col-2 playPause" onclick="playOrPauseSong()">
                                <i class="fas fa-play controlColor" id="playpau"></i>
                            </div>
                            <div class="col-1">
                                 <i class="fas fa-step-forward controlColor" onclick="next()"></i>
                            </div>
                            <div class="col-1">
                                 <i class="fas fa-retweet controlColor"></i>
                            </div>
                            <div class="col-3"></div>
                        </div></div>
                    <div class="col-12">
                        <div class="row">
                            <div class="col-2 seekTime "><p id="timer">0:19</p></div>
                            <div class="col-8 mt-2" id="seek-bar">
                                <input type="range" oninput="setPos(this.value)" id="seek" value="0" max="">
                                <div id="fill"> </div>
                            </div>
                            <div class="col-2 seekTime "><p id="songLength">3:05</p></div>
                        </div>
                </div>
                </div></div>
            <div class="col-4 col-sm-5 col-md-3 col-lg-3 col-xl-3 controlLeft">
                <div class="row" >
                            <div class="col-7 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                <div class="volume_controls">
                                <button id="mute" onclick="mute()"><i class="fa fa-volume-up"></i></button>
                                <input type="range" id="volume" oninput="setVolume(this.value)" min="0" max="1" step="0.01" value="1">
                                </div>
                            </div>
                            <div class="col-2"><i class="fas fa-plus controlColor"></i></div>
                            <div class="col-2"><i class="fas fa-share controlColor"></i></div>
                            <div class="col-2"><a href="#" id="queue"><i class="fas fa-list controlColor" id="changeColor"></i></a> </div>
                </div>
            </div>
        </div>
    </footer>

<!--for right click / menu  -->
<div id="menu">
  <a href="#">
    <i class=" fa fas fa-random"></i> Shuffle Songs <span>Ctrl + S</span>
  </a>
  <a href="#">
    <i class="fa fas fa-retweet"></i>Loop Song <span>Ctrl + L</span>
  </a>
  <hr />
  <a href="#">
    <i class="fa fa-plus"></i> Help <span>Ctrl + ?</span>
  </a>
  <a href="#">
    <i class="fa fa-flag"></i> Report <span>Ctrl + R</span>
  </a>
</div>





<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{% static 'js/jquery-3.4.1.min.js'%}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="{% static 'js/jquery.growl.js'%}"></script>
    <script src="{% static 'js/bootstrap.min.js'%}"></script>

<!--for default audio player-->
<script type="text/javascript">
    var file = ["static/musics/{{youmightalsolike.1.file}}","static/musics/{{youmightalsolike.2.file}}","static/musics/{{youmightalsolike.3.file}}","static/musics/{{youmightalsolike.4.file}}",];
    var artwork_name = ["{{youmightalsolike.1.artwork_name}}","{{youmightalsolike.2.artwork_name}}","{{youmightalsolike.3.artwork_name}}","{{youmightalsolike.4.artwork_name}}",];
    var songName = ["{{youmightalsolike.1.title}}","{{youmightalsolike.2.title}}","{{youmightalsolike.3.title}}","{{youmightalsolike.4.title}}"];
    var artistName = ["{{youmightalsolike.1.album_artist}}","{{youmightalsolike.2.album_artist}}","{{youmightalsolike.3.album_artist}}","{{youmightalsolike.4.album_artist}}"];
    var totalLength = ["{{youmightalsolike.1.length}}","{{youmightalsolike.2.length}}","{{youmightalsolike.3.length}}","{{youmightalsolike.4.length}}"];

    favouriteView(0)

    var songTitle = document.getElementById("songTitle");
    var fillBar = document.getElementById("fill");
    var muted = false;
    var vol = 1;

    var song = new Audio();
    var currentSong = 0; // it point to current song

    $("#CtrlImage img").attr("src",'static/thumbnails/'+artwork_name[currentSong]);
    window.onload = playPause();  // it will call the function playSong when window is load

    function playPause(){
        song.src = file[currentSong]; //set the source of 0th song
            songTitle.textContent = songName[currentSong]; //sets the title of song
            songArtist.textContent = artistName[currentSong]; //sets the title of song

        song.pause(); // play the song
    }

    function playSong(){
        song.src = file[currentSong]; //set the source of 0th song
            songTitle.textContent = songName[currentSong]; //sets the title of song
            songArtist.textContent = artistName[currentSong]; //sets the title of song
            songLength.textContent = totalLength[currentSong];

        song.play(); // play the song
    }

    function playOrPauseSong(){
        if(song.paused){
            song.play();
            document.getElementById("playpau").classList.remove('fa-play');
            document.getElementById("playpau").classList.add('fa-pause');
        }
        else{
            song.pause();
            document.getElementById("playpau").classList.remove('fa-pause');
            document.getElementById("playpau").classList.add('fa-play');
        }
    }

    function setPos(pos) {
        song.currentTime = pos;
    }

    function mute() {
        if (muted) {
            song.volume = vol;
            muted = false;
            document.getElementById('mute').innerHTML = '<i class="fa fa-volume-up"></i>';
        } else {
            song.volume = 0;
            muted = true;
            document.getElementById('mute').innerHTML = '<i class="fa fa-volume-off"></i>';
        }
    }
    function setVolume(volume) {
        song.volume = volume;
        vol = volume;
    }

    song.addEventListener('timeupdate', function(){
       curtime = parseInt(song.currentTime,10);
        document.getElementById('seek').max = song.duration;
        document.getElementById('seek').value = curtime;
        var position = song.currentTime / song.duration;
            fillBar.style.width = position * 100 +'%';

<!--for timer-->
            var seconds = song.currentTime;
            // multiply by 1000 because Date() requires miliseconds
            var date = new Date(seconds * 1000);
            //var hh = date.getUTCHours();
            var mm = date.getUTCMinutes();
            var ss = date.getSeconds();
            // If you were building a timestamp instead of a duration, you would uncomment the following line to get 12-hour (not 24) time
            // if (hh > 12) {hh = hh % 12;}
            // These lines ensure you have two-digits
            //if (hh < 10) {hh = "0"+hh;}
            if (mm < 10) {mm = "0"+mm;}
            if (ss < 10) {ss = "0"+ss;}
            // This formats your string to HH:MM:SS
            var t = mm+":"+ss;
              timer.textContent = t;
    });

    function next(){
        currentSong++;
        if(currentSong >= 4){  // here 4 is total songs change it later to loop out total song
            currentSong = 0;
        }
        playSong();
        document.getElementById("playpau").classList.remove('fa-play');
        document.getElementById("playpau").classList.add('fa-pause');
        $("#CtrlImage img").attr("src",'static/thumbnails/'+artwork_name[currentSong]);

        favouriteView(currentSong)
    }


    function pre(){
        currentSong--;
        if(currentSong < 0){
            currentSong = 3; //  =4-1 here 4 is total songs change it later to loop out total song
        }
        playSong();
        document.getElementById("playpau").classList.remove('fa-play');
        document.getElementById("playpau").classList.add('fa-pause');
        $("#CtrlImage img").attr("src",'static/thumbnails/'+artwork_name[currentSong]);

         favouriteView(currentSong)
    }

    function favouriteView(currentSong){
        artworkPath = artwork_name[currentSong]
        tempArtwork = artworkPath.split("/");
        ArtworkName= tempArtwork.slice(-1)[0]
        $.ajax({
            url: "../favyesorno/" + ArtworkName,
            success: function(result){
                if (result == 'yes'){
                    document.getElementById("favheart").classList.remove('far');
                    document.getElementById("favheart").classList.add('fas');
                    onclickdata = 'favourite("fas")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                }else if (result == 'no'){
                    document.getElementById("favheart").classList.remove('fas');
                    document.getElementById("favheart").classList.add('far');
                    onclickdata = 'favourite("far")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                }
            }
        });
    }

</script>

<!--for click to play Single song-->
<script type="text/javascript">
    function singleSongPlay(clickedSongData){

     //clear searches
  document.getElementById('search').value = '';


            var clickedSongDataSplit = clickedSongData.split(",,");

            var file = ['static/musics/'+clickedSongDataSplit[0]];
            var artwork_name =  ['static/thumbnails/'+clickedSongDataSplit[1]]
            var songName = [clickedSongDataSplit[2]];
            var artistName = [clickedSongDataSplit[3]];

            $("#CtrlImage img").attr("src",artwork_name[currentSong]);

            song.src = file[currentSong]; //set the source of 0th song
            songTitle.textContent = songName[currentSong]; //sets the title of song
            songArtist.textContent = artistName[currentSong]; //sets the title of song

            document.getElementById("playpau").classList.remove('fa-play');
            document.getElementById("playpau").classList.add('fa-pause');

            song.play(); // play the song


        artworkPath = artwork_name[0]
        tempArtwork = artworkPath.split("/");
        ArtworkName= tempArtwork.slice(-1)[0]
        $.ajax({
            url: "../favyesorno/" + ArtworkName,
            success: function(result){
                if (result == 'yes'){
                    document.getElementById("favheart").classList.remove('far');
                    document.getElementById("favheart").classList.add('fas');
                    onclickdata = 'favourite("fas")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                }else if (result == 'no'){
                    document.getElementById("favheart").classList.remove('fas');
                    document.getElementById("favheart").classList.add('far');
                    onclickdata = 'favourite("far")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                }
            }
        });

    }
</script>


<!--for click to play Album song-->
<script type="text/javascript">
    function albumSongPlay(clickedAlbumData){
    var totsong =Object.keys(clickedAlbumData).length;

    var file=[];  //all file here
    var artwork_name=[];  //all artwork_name here
    var songName=[];  //all songName here
    var artistName=[];  //all artistName here
    var totalLength=[];  //all totalLength here
    for (i = 0; i < totsong; i++) {
        var filedest = ["static/musics/"+clickedAlbumData[i][1]] ;
        file.push(filedest);
        var artwork_namedest =  ['static/thumbnails/'+clickedAlbumData[i][3]];
        artwork_name.push(artwork_namedest);
        var songNamedest = [clickedAlbumData[i][0]];
        songName.push(songNamedest);
        var artistNamedest = [clickedAlbumData[i][2]];
        artistName.push(artistNamedest);
        var totalLengthdest = [clickedAlbumData[i][4]];
        totalLength.push(totalLengthdest);

    }
    console.log(file[0][0]);
    console.log(artwork_name);
    console.log(songName);
    console.log(artistName);
    console.log(totalLength);
<!--copied-->
    var songTitle = document.getElementById("songTitle");
    var fillBar = document.getElementById("fill");
    var muted = false;
    var vol = 1;
    var song = new Audio();
    var currentSong = 0; // it point to current song

    $("#CtrlImage img").attr("src",artwork_name[currentSong]);
    window.onload = playPause();  // it will call the function playSong when window is load

    function playPause(){
        song.pause();
        song.src = file[currentSong]; //set the source of 0th song
            songTitle.textContent = songName[currentSong]; //sets the title of song
            songArtist.textContent = artistName[currentSong]; //sets the title of song

        song.play(); // play the song
    }

    function playSong(){
        song.src = file[currentSong]; //set the source of 0th song
            songTitle.textContent = songName[currentSong]; //sets the title of song
            songArtist.textContent = artistName[currentSong]; //sets the title of song
            songLength.textContent = totalLength[currentSong];

        song.play(); // play the song
    }
    function playOrPauseSong(){
        if(song.paused){
            song.play();
            document.getElementById("playpau").classList.remove('fa-play');
            document.getElementById("playpau").classList.add('fa-pause');
        }
        else{
            song.pause();
            document.getElementById("playpau").classList.remove('fa-pause');
            document.getElementById("playpau").classList.add('fa-play');
        }
    }

    function setPos(pos) {
        song.currentTime = pos;
    }

    function mute() {
        if (muted) {
            song.volume = vol;
            muted = false;
            document.getElementById('mute').innerHTML = '<i class="fa fa-volume-up"></i>';
        } else {
            song.volume = 0;
            muted = true;
            document.getElementById('mute').innerHTML = '<i class="fa fa-volume-off"></i>';
        }
    }
    function setVolume(volume) {
        song.volume = volume;
        vol = volume;
    }

    song.addEventListener('timeupdate', function(){
       curtime = parseInt(song.currentTime,10);
        document.getElementById('seek').max = song.duration;
        document.getElementById('seek').value = curtime;
        var position = song.currentTime / song.duration;
            fillBar.style.width = position * 100 +'%';

    <!--for timer-->
            var seconds = song.currentTime;
            // multiply by 1000 because Date() requires miliseconds
            var date = new Date(seconds * 1000);
            //var hh = date.getUTCHours();
            var mm = date.getUTCMinutes();
            var ss = date.getSeconds();
            // If you were building a timestamp instead of a duration, you would uncomment the following line to get 12-hour (not 24) time
            // if (hh > 12) {hh = hh % 12;}
            // These lines ensure you have two-digits
            //if (hh < 10) {hh = "0"+hh;}
            if (mm < 10) {mm = "0"+mm;}
            if (ss < 10) {ss = "0"+ss;}
            // This formats your string to HH:MM:SS
            var t = mm+":"+ss;
              timer.textContent = t;
    });

    function next(){
        currentSong++;
        if(currentSong >= 4){  // here 4 is total songs change it later to loop out total song
            currentSong = 0;
        }
        playSong();
        document.getElementById("playpau").classList.remove('fa-play');
        document.getElementById("playpau").classList.add('fa-pause');
        $("#CtrlImage img").attr("src",artwork_name[currentSong]);
    }

    function pre(){
        currentSong--;
        if(currentSong < 0){
            currentSong = 3; //  =4-1 here 4 is total songs change it later to loop out total song
        }
        playSong();
        document.getElementById("playpau").classList.remove('fa-play');
        document.getElementById("playpau").classList.add('fa-pause');
        $("#CtrlImage img").attr("src",artwork_name[currentSong]);
    }


















<!-- till here   -->
<!--            $("#CtrlImage img").attr("src",artwork_name[currentSong]);-->

<!--            song.src = file[currentSong]; //set the source of 0th song-->
<!--            songTitle.textContent = songName[currentSong]; //sets the title of song-->
<!--            songArtist.textContent = artistName[currentSong]; //sets the title of song-->

<!--            document.getElementById("playpau").classList.remove('fa-play');-->
<!--            document.getElementById("playpau").classList.add('fa-pause');-->

<!--        song.play(); // play the song-->

    }
</script>




<!--for notification type error, notice, warning-->
  <script type="text/javascript">
  {% if messages %}
  {% for message in messages %}
   {% if notitype %}
    $.growl.{{notitype}}({message:" {{message}}  "});
    {% else %}

    $.growl.notice ({ message: " {{message}}  "});
    {% endif %}
  {% endfor %}
  {% endif %}
</script>

<!--script for side nav maximize and minimize-->
    <script>
        $(document).ready(function () {
           window.browserSize = "big"
                 var w = window.outerWidth;
                 if (w < 578) {
                    window.browserSize = "small"
                    $('#sidebarCollapse').on('click', function () {
                        $('#sidebar').toggleClass('active');
                    });
                 };



            var onresize = function(e) {
               //note i need to pass the event as an argument to the function
               width = e.target.outerWidth;
               height = e.target.outerHeight;

               if (window.browserSize != "small"){
                   if (width < 578) {
                        window.browserSize = "small"
                        $('#sidebarCollapse').on('click', function () {
                            $('#sidebar').toggleClass('active');
                        });
                     }
               }
               else if (width > 578){
                    window.browserSize = "big"
                    $('#sidebarCollapse').on('click', function () {
                            $('#sidebar').toggleClass('active');
                        });
                    }


}


window.addEventListener("resize", onresize);

        });


    </script>

<!--script for music control maximize and minimize-->
<script>
$(document).ready(function(){
  $("#hideControl").click(function(){
    $("#hideControl").hide();
    $("#CCmusic").hide();
    $("#showControl").show();
  });
  $("#showControl").click(function(){
    $("#hideControl").show();
    $("#CCmusic").show();
    $("#showControl").hide()
  });
});
</script>

<!--  script of opening nav in same page-->
  <script>
      $(document).ready(function(){
        $("#home").click(function(){
        document.getElementById("home").classList.remove('deactivated');
        document.getElementById("home").classList.add('activated');
        document.getElementById("top").classList.remove('activated');
        document.getElementById("top").classList.add('deactivated');
        document.getElementById("new").classList.remove('activated');
        document.getElementById("new").classList.add('deactivated');
        document.getElementById("recent").classList.remove('activated');
        document.getElementById("recent").classList.add('deactivated');
        document.getElementById("library").classList.remove('activated');
        document.getElementById("library").classList.add('deactivated');
        document.getElementById("changeColor").classList.remove('colorWhite');
        document.getElementById("changeColor").classList.add('controlColor');
           $.ajax({
            url: "../home",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });

        $("#top").click(function(){
        document.getElementById("home").classList.remove('activated');
        document.getElementById("home").classList.add('deactivated');
        document.getElementById("top").classList.remove('deactivated');
        document.getElementById("top").classList.add('activated');
        document.getElementById("new").classList.remove('activated');
        document.getElementById("new").classList.add('deactivated');
        document.getElementById("recent").classList.remove('activated');
        document.getElementById("recent").classList.add('deactivated');
        document.getElementById("library").classList.remove('activated');
        document.getElementById("library").classList.add('deactivated');
        document.getElementById("changeColor").classList.remove('colorWhite');
        document.getElementById("changeColor").classList.add('controlColor');
           $.ajax({
            url: "../top",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });

        $("#new").click(function(){
        document.getElementById("home").classList.remove('activated');
        document.getElementById("home").classList.add('deactivated');
        document.getElementById("top").classList.remove('activated');
        document.getElementById("top").classList.add('deactivated');
        document.getElementById("new").classList.remove('deactivated');
        document.getElementById("new").classList.add('activated');
        document.getElementById("recent").classList.remove('activated');
        document.getElementById("recent").classList.add('deactivated');
        document.getElementById("library").classList.remove('activated');
        document.getElementById("library").classList.add('deactivated');
        document.getElementById("changeColor").classList.remove('colorWhite');
        document.getElementById("changeColor").classList.add('controlColor');
           $.ajax({
            url: "../new",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });

        $("#recent").click(function(){
        document.getElementById("home").classList.remove('activated');
        document.getElementById("home").classList.add('deactivated');
        document.getElementById("top").classList.remove('activated');
        document.getElementById("top").classList.add('deactivated');
        document.getElementById("new").classList.remove('activated');
        document.getElementById("new").classList.add('deactivated');
        document.getElementById("recent").classList.remove('deactivated');
        document.getElementById("recent").classList.add('activated');
        document.getElementById("library").classList.remove('activated');
        document.getElementById("library").classList.add('deactivated');
        document.getElementById("changeColor").classList.remove('colorWhite');
        document.getElementById("changeColor").classList.add('controlColor');
           $.ajax({
            url: "../recent",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });

        $("#library").click(function(){
        document.getElementById("home").classList.remove('activated');
        document.getElementById("home").classList.add('deactivated');
        document.getElementById("top").classList.remove('activated');
        document.getElementById("top").classList.add('deactivated');
        document.getElementById("new").classList.remove('activated');
        document.getElementById("new").classList.add('deactivated');
        document.getElementById("recent").classList.remove('activated');
        document.getElementById("recent").classList.add('deactivated');
        document.getElementById("library").classList.remove('deactivated');
        document.getElementById("library").classList.add('activated');
        document.getElementById("changeColor").classList.remove('colorWhite');
        document.getElementById("changeColor").classList.add('controlColor');
           $.ajax({
            url: "../library",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });

        $("#queue").click(function(){
        document.getElementById("home").classList.remove('activated');
        document.getElementById("home").classList.add('deactivated');
        document.getElementById("top").classList.remove('activated');
        document.getElementById("top").classList.add('deactivated');
        document.getElementById("new").classList.remove('activated');
        document.getElementById("new").classList.add('deactivated');
        document.getElementById("recent").classList.remove('activated');
        document.getElementById("recent").classList.add('deactivated');
        document.getElementById("library").classList.remove('activated');
        document.getElementById("library").classList.add('deactivated');
        document.getElementById("changeColor").classList.remove('controlColor');
        document.getElementById("changeColor").classList.add('colorWhite');
           $.ajax({
            url: "../queue",
            success: function(result){
                $("#displayInMainContent").html(result);
                }
            });
        });






      });
  </script>

<!--for log-->
<script type="text/javascript">
    function loguser(){
        sign = document.getElementById("replace").textContent;
        if (sign === "Sign In"){
            document.getElementById("home").classList.remove('activated');
            document.getElementById("home").classList.add('deactivated');
            document.getElementById("top").classList.remove('activated');
            document.getElementById("top").classList.add('deactivated');
            document.getElementById("new").classList.remove('activated');
            document.getElementById("new").classList.add('deactivated');
            document.getElementById("recent").classList.remove('activated');
            document.getElementById("recent").classList.add('deactivated');
            document.getElementById("library").classList.remove('deactivated');
            document.getElementById("library").classList.add('activated');
            document.getElementById("changeColor").classList.remove('colorWhite');
            document.getElementById("changeColor").classList.add('controlColor');

               $.ajax({
                url: "../signin",
                success: function(result){
                    $("#displayInMainContent").html(result);
                    }
                });
        }else if (sign === "Sign Out"){
            document.getElementById("home").classList.remove('deactivated');
            document.getElementById("home").classList.add('activated');
            document.getElementById("top").classList.remove('activated');
            document.getElementById("top").classList.add('deactivated');
            document.getElementById("new").classList.remove('activated');
            document.getElementById("new").classList.add('deactivated');
            document.getElementById("recent").classList.remove('activated');
            document.getElementById("recent").classList.add('deactivated');
            document.getElementById("library").classList.remove('activated');
            document.getElementById("library").classList.add('deactivated');
            document.getElementById("changeColor").classList.remove('colorWhite');
            document.getElementById("changeColor").classList.add('controlColor');

             document.getElementById("replace").textContent = "Sign In";

               $.ajax({
                url: "../signout",
                success: function(result){
                    $("#displayInMainContent").html(result);
                    //removing favourite solid
	    document.getElementById("favheart").classList.remove('fas');
        document.getElementById("favheart").classList.add('far');
        onclickdata = 'favourite("far")';
        document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                    }
                });
        }
}


    </script>

<!--  script for right click-->
  <script>
      var i = document.getElementById("menu").style;
if (document.addEventListener) {
  document.addEventListener('contextmenu', function(e) {
    var posX = e.clientX;
    var posY = e.clientY;
    menu(posX, posY);
    e.preventDefault();
  }, false);
  document.addEventListener('click', function(e) {
    i.opacity = "0";
    setTimeout(function() {
      i.visibility = "hidden";
    }, 501);
  }, false);
} else {
  document.attachEvent('oncontextmenu', function(e) {
    var posX = e.clientX;
    var posY = e.clientY;
    menu(posX, posY);
    e.preventDefault();
  });
  document.attachEvent('onclick', function(e) {
    i.opacity = "0";
    setTimeout(function() {
      i.visibility = "hidden";
    }, 501);
  });
}

function menu(x, y) {
  i.top = y + "px";
  i.left = x + "px";
  i.visibility = "visible";
  i.opacity = "1";
}
  </script>

<!--  for sign in-->
<script type="text/javascript">


    function signin(){
          var username = document.getElementById("username").value;
          var password = document.getElementById("password").value;

          function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const_csrftoken = getCookie('csrftoken');



          if(username && password)
          {

            $.ajax
            ({
              type: 'post',
              url: '../signindata',
              data:
              {
                 username:username,
                 password:password,
                 csrfmiddlewaretoken: const_csrftoken,
              },
              success: function (response)
              {
                $("#displayInMainContent").html(response);
                document.getElementById("replace").textContent = "Sign Out";

                    //to refresh favourite
                    var artworkPath = document.getElementById("ControlArtwork").src;
                    tempArtwork = artworkPath.split("/");
                    ArtworkName= tempArtwork.slice(-1)[0];
                        $.ajax({
                            url: "../favyesorno/" + ArtworkName,
                            success: function(result){
                                if (result == 'yes'){
                                    document.getElementById("favheart").classList.remove('far');
                                    document.getElementById("favheart").classList.add('fas');
                                    onclickdata = 'favourite("fas")';
                                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                                }else if (result == 'no'){
                                    document.getElementById("favheart").classList.remove('fas');
                                    document.getElementById("favheart").classList.add('far');
                                    onclickdata = 'favourite("far")';
                                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                                }
                            }
                        });

              }
            });


          }

          return false;
}
</script>

<!--  for sign up-->
<script type="text/javascript">
    function signup()
{
  var username = document.getElementById("username").value;
  var password = document.getElementById("password").value;
  var email = document.getElementById("email").value;
  var fname = document.getElementById("fname").value;
  var lname = document.getElementById("lname").value;
  var bday = document.getElementById("bday").value;

  if (document.getElementById('male').checked) {
      gender = document.getElementById('male').value;
    }else if (document.getElementById('female').checked) {
      gender = document.getElementById('female').value;
    }else{
      gender = document.getElementById('other').value;
    }

  if(username && password && email && fname && lname && bday && gender)
  {
    $.ajax
    ({
      type: 'post',
      url: '../signupdata',
      data:
      {
         username:username,
		 password:password,
		 email:email,
		 fname:fname,
		 lname:lname,
		 bday:bday,
		 gender:gender,
		 csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      success: function (response)
      {
	    $("#displayInMainContent").html(response);

      }
    });
  }

  return false;
}
</script>

<!--  for sending mail - forgot password -->
<script type="text/javascript">
    function forgetsendmail()
{
  var email = document.getElementById("email").value;
  if(email)
  {
    $.ajax
    ({
      type: 'post',
      url: '../forgotpasswordwerifyemail',
      data:
      {
		 email:email,
		 csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      success: function (response)
      {
	    $("#displayInMainContent").html(response);
      }
    });
  }

  return false;
}
</script>

<!--  for searches-->
<script type="text/javascript">
    $(function(){
        $('#search').keyup(function(){
        var search_data = $('#search').val()
        console.log(search_data)
            $.ajax({
                type:"POST",
                url: "/search_data",
                data:{
                    'search_text' : $('#search').val(),
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response){
                    $("#displayInMainContent").html(response);
                }
            });
        });


        $('#searchedByForm').keyup(function(){
            $.ajax({
                type:"POST",
                url: "/search_data",
                data:{
                    'search_text' : $('#search').val(),
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response){
                    $("#displayInMainContent").html(response);
                }
            });
        });
    });

</script>

<!--clearing searches on x-->
<script>
    $('input[type=search]').on('search', function () {
    $.ajax({
                type:"POST",
                url: "/search_data",
                data:{
                    'search_text' : '',
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response){
                    $("#displayInMainContent").html(response);
                }
            });
});

</script>

<!--  for weekly top 15-->
<script>
 function GoToView(topic){
      //clear searches
  document.getElementById('search').value = '';

        $.ajax({
            url: "../view/" + topic,
            success: function(result){
                $("#displayInMainContent").html(result);
                }
         });
    }
</script>

<!--  for Artist Profile-->
<script>
 function ArtistView(topic){

 //clear searches
  document.getElementById('search').value = '';
        $.ajax({
            url: "../artist/" + topic,
            success: function(result){
                $("#displayInMainContent").html(result);
                }
         });
    }

  </script>

<!--for public playlist-->
<script>
    function public_playlist(PlaylistName){
     //clear searches
  document.getElementById('search').value = '';
        $.ajax({
            url: "../public_playlist/" + PlaylistName,
            success: function(result){
                $("#displayInMainContent").html(result);
                }
         });
    }
</script>

<!--for favourite-->
<script>
    function favourite(favclick){
    var artworkPath = document.getElementById("ControlArtwork").src;
    tempArtwork = artworkPath.split("/");
    ArtworkName= tempArtwork.slice(-1)[0]

        $.ajax({
            url: "../favourite/" + ArtworkName,
            success: function(result){
            console.log(result)
                if (result=="Added to favourite"){
                    document.getElementById("favheart").classList.remove('far');
                    document.getElementById("favheart").classList.add('fas');
                    onclickdata = 'favourite("fas")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                 }else if (result=="Removed from favourite"){
                    document.getElementById("favheart").classList.remove('fas');
                    document.getElementById("favheart").classList.add('far');
                    onclickdata = 'favourite("far")';
                    document.getElementById("favheartmain").setAttribute( "onClick",  onclickdata);
                 }
                 else{
                     $("#displayInMainContent").html(result);
                 }
             }
         });
    }

</script>

<!--  go to playlist view-->




  </body>
</html>